{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nconst initialState = {\n  currentKanji: {\n    id: 0,\n    character: \"\",\n    url: \"\",\n    level: 0,\n    meanings: [],\n    similarIds: []\n  },\n  currentSimilarKanji: [],\n  answered: false,\n  correct: null,\n  validKanji: []\n};\nconst questionSlice = createSlice({\n  name: \"question\",\n  initialState,\n  reducers: {\n    setCurrentKanji: (state, action) => {\n      // remove previous currentKanji from validKanji, if it exists\n      if (state.validKanji.length > 0) {\n        state.validKanji = state.validKanji.filter(kanji => typeof kanji === \"number\" ? kanji !== state.currentKanji.id : kanji.id !== state.currentKanji.id);\n      } // maybe just use removeKanji action instead?\n\n      state.currentKanji = action.payload;\n    },\n    setSimilarKanji: (state, action) => {\n      state.currentSimilarKanji = action.payload;\n    },\n    setAnswered: (state, action) => {\n      state.answered = action.payload;\n    },\n    setCorrect: (state, action) => {\n      state.correct = action.payload;\n    },\n    setValidKanji: (state, action) => {\n      // if (current(state).validKanji.length === 0) {\n      state.validKanji = action.payload;\n      // } else {\n      //   state.validKanji = [...current(state).validKanji, action.payload];\n      // }\n    },\n    removeKanji: (state, action) => {\n      state.validKanji = state.validKanji.filter(kanji => typeof kanji === \"number\" ? kanji !== action.payload : kanji.id !== action.payload);\n    }\n  }\n});\nexport const {\n  setCurrentKanji,\n  setSimilarKanji,\n  setAnswered,\n  setCorrect,\n  setValidKanji,\n  removeKanji\n} = questionSlice.actions;\nexport const getSimilarKanji = similarIds => {\n  var _s = $RefreshSig$();\n  return _s(async (dispatch, useState) => {\n    _s();\n    const apiKey = useState().user.apiKey;\n    let ids = [...similarIds]; // copy array\n\n    // if more than 3 similar kanji, pick 3 random ones\n    if (ids.length > 3) {\n      ids.sort(() => Math.random() - 0.5); // randomize array\n      ids = ids.slice(0, 3); // take first 3 elements\n    }\n    let kanjiOptions = [useState().question.currentKanji];\n    const getSimilarKanji = async (id, index) => {\n      await axios.get(`https://api.wanikani.com/v2/subjects/${id}`, {\n        headers: {\n          Authorization: `Bearer ${apiKey}`\n        }\n      }).then(res => {\n        // console.log(res.data, index);\n        const kanji = {\n          id: res.data.id,\n          character: res.data.data.characters,\n          url: res.data.data.document_url,\n          level: res.data.data.level,\n          meanings: res.data.data.meanings.map(meaning => meaning.meaning),\n          similarIds: res.data.data.visually_similar_subject_ids\n        };\n        kanjiOptions = [...kanjiOptions, kanji];\n      });\n    };\n\n    // get similar kanji for each id\n    for (let i = 0; i < ids.length; i++) {\n      await getSimilarKanji(ids[i], i);\n    }\n\n    // randomize kanjiOptions\n    kanjiOptions = kanjiOptions.sort(() => Math.random() - 0.5);\n    dispatch(setSimilarKanji(kanjiOptions));\n  }, \"4eLOaIE0Yl15ohhrrvSgicSmGzk=\");\n};\nexport const pickKanji = () => {\n  var _s2 = $RefreshSig$();\n  return _s2(async (dispatch, useState) => {\n    _s2();\n    console.log(\"kanji being picked...\");\n    const validKanji = useState().question.validKanji;\n    const apiKey = useState().user.apiKey;\n    if (validKanji.length === 0) {\n      console.log(\"no kanji left\");\n      return;\n    } else {\n      console.log(\"valid kanji:\", validKanji);\n    }\n    if (typeof validKanji[0] === \"object\") {\n      console.log(\"level\");\n      dispatch(setCurrentKanji(validKanji[0]));\n      dispatch(getSimilarKanji(validKanji[0].similarIds));\n      dispatch(setValidKanji(validKanji.slice(1)));\n    } else if (typeof validKanji[0] === \"number\") {\n      console.log(\"srs\");\n      let currentIndex = 0;\n      const fetchKanji = async index => {\n        await axios.get(`https://api.wanikani.com/v2/subjects/${validKanji[index]}`, {\n          headers: {\n            Authorization: `Bearer ${apiKey}`\n          }\n        }).then(res => {\n          console.log(res.data);\n          if (res.data.data.visually_similar_subject_ids.length > 1) {\n            // console.log(\"valid\");\n            // update validKanji to remove all kanji previous to current kanji\n            dispatch(setValidKanji(validKanji.slice(index + 1)));\n            dispatch(setCurrentKanji({\n              id: res.data.id,\n              character: res.data.data.characters,\n              url: res.data.data.document_url,\n              level: res.data.data.level,\n              meanings: res.data.data.meanings.map(meaning => meaning.meaning),\n              similarIds: res.data.data.visually_similar_subject_ids\n            }));\n            dispatch(getSimilarKanji(res.data.data.visually_similar_subject_ids));\n          } else {\n            // console.log(\"invalid\");\n            currentIndex += 1;\n            fetchKanji(currentIndex);\n          }\n        }).catch(err => {\n          console.log(err);\n          if (err.response.status === 429) {\n            console.log(err.response.data.error);\n          }\n        });\n      };\n      fetchKanji(currentIndex);\n      // console.log(validKanji);\n    }\n  }, \"4eLOaIE0Yl15ohhrrvSgicSmGzk=\");\n};\nexport const answerQuestion = selectedKanji => {\n  var _s3 = $RefreshSig$();\n  return _s3(async (dispatch, useState) => {\n    _s3();\n    const answer = useState().question.currentKanji;\n    dispatch(setAnswered(true));\n    if (selectedKanji.id === answer.id) {\n      dispatch(setCorrect(true));\n    } else {\n      dispatch(setCorrect(false));\n    }\n  }, \"VhlnxxH3xh7Qs17KADUJ8wvRSZs=\");\n};\nexport const nextQuestion = () => {\n  return async dispatch => {\n    // console.log(\"next question 2\");\n    dispatch(setAnswered(false));\n    dispatch(setCorrect(null));\n    dispatch(pickKanji());\n  };\n};\nexport const initStudyByLevel = selectedLevels => {\n  var _s4 = $RefreshSig$();\n  return _s4(async (dispatch, useState) => {\n    _s4();\n    const apiKey = useState().user.apiKey;\n    let validKanji = [];\n\n    // recursively fetch all pages of kanji ids\n    const fetchIds = async url => {\n      if (url) {\n        await axios.get(url, {\n          headers: {\n            Authorization: `Bearer ${apiKey}`\n          }\n        }).then(res => {\n          console.log(\"fetched:\", res.data);\n\n          // dispatch(\n          //   setValidKanji(\n          //     res.data.data\n          //       .filter(\n          //         (kanji: KanjiSubjectData) =>\n          //           kanji.data.visually_similar_subject_ids.length > 1\n          //       )\n          //       .map((kanji: KanjiSubjectData) => {\n          //         return {\n          //           id: kanji.id,\n          //           character: kanji.data.characters,\n          //           url: kanji.url,\n          //           level: kanji.data.level,\n          //           meanings: kanji.data.meanings.map(\n          //             (meaning) => meaning.meaning\n          //           ),\n          //           similarIds: kanji.data.visually_similar_subject_ids,\n          //         };\n          //       })\n          //   )\n          // );\n\n          validKanji = validKanji.concat(res.data.data.filter(kanji => kanji.data.visually_similar_subject_ids.length > 1).map(kanji => {\n            return {\n              id: kanji.id,\n              character: kanji.data.characters,\n              url: kanji.url,\n              level: kanji.data.level,\n              meanings: kanji.data.meanings.map(meaning => meaning.meaning),\n              similarIds: kanji.data.visually_similar_subject_ids\n            };\n          }));\n          if (res.data.total_count > res.data.pages.per_page && res.data.pages.next_url) {\n            console.log(\"fetching next page\");\n            fetchIds(res.data.pages.next_url);\n          }\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    };\n    await fetchIds(`https://api.wanikani.com/v2/subjects?types=kanji&started=true&levels=${selectedLevels}`);\n\n    // randomize validKanji\n    validKanji = validKanji.sort(() => Math.random() - 0.5);\n    dispatch(setValidKanji(validKanji));\n    dispatch(pickKanji());\n  }, \"VhlnxxH3xh7Qs17KADUJ8wvRSZs=\");\n};\nexport const initStudyBySrs = selectedStage => {\n  var _s5 = $RefreshSig$();\n  return _s5(async (dispatch, useState) => {\n    _s5();\n    const apiKey = useState().user.apiKey;\n    let validKanji = [];\n    // recursively fetch all pages of kanji ids\n    const fetchIds = async url => {\n      if (url) {\n        await axios.get(url, {\n          headers: {\n            Authorization: `Bearer ${apiKey}`\n          }\n        }).then(res => {\n          console.log(\"fetched:\", res.data);\n\n          // dispatch(\n          //   setValidKanji(\n          //     res.data.data\n          //       .filter(\n          //         (kanji: KanjiAssignmentData) =>\n          //           kanji.data.subject_type === \"kanji\"\n          //       )\n          //       .map((kanji: KanjiAssignmentData) => kanji.data.subject_id)\n          //   )\n          // );\n\n          validKanji = [...validKanji, ...res.data.data.filter(kanji => kanji.data.subject_type === \"kanji\").map(kanji => kanji.data.subject_id)];\n          if (res.data.total_count > res.data.pages.per_page && res.data.pages.next_url) {\n            console.log(\"fetching next page\");\n            fetchIds(res.data.pages.next_url);\n          }\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    };\n    await fetchIds(`https://api.wanikani.com/v2/assignments?srs_stages=${selectedStage}`);\n\n    // randomize validKanji\n    validKanji = validKanji.sort(() => Math.random() - 0.5);\n    dispatch(setValidKanji(validKanji));\n    dispatch(pickKanji());\n  }, \"VhlnxxH3xh7Qs17KADUJ8wvRSZs=\");\n};\nexport default questionSlice.reducer;\n// holds selected kanji, possible answers, answer, etc","map":{"version":3,"names":["createSlice","axios","initialState","currentKanji","id","character","url","level","meanings","similarIds","currentSimilarKanji","answered","correct","validKanji","questionSlice","name","reducers","setCurrentKanji","state","action","length","filter","kanji","payload","setSimilarKanji","setAnswered","setCorrect","setValidKanji","removeKanji","actions","getSimilarKanji","_s","$RefreshSig$","dispatch","useState","apiKey","user","ids","sort","Math","random","slice","kanjiOptions","question","index","get","headers","Authorization","then","res","data","characters","document_url","map","meaning","visually_similar_subject_ids","i","pickKanji","_s2","console","log","currentIndex","fetchKanji","catch","err","response","status","error","answerQuestion","selectedKanji","_s3","answer","nextQuestion","initStudyByLevel","selectedLevels","_s4","fetchIds","concat","total_count","pages","per_page","next_url","initStudyBySrs","selectedStage","_s5","subject_type","subject_id","reducer"],"sources":["/Users/smanor/Development/code/personal/wk-similar/src/reducers/QuestionReducer.ts"],"sourcesContent":["import { createSlice, current } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\ninterface KanjiSubjectData {\n  data: {\n    amalgamation_subject_ids: number[];\n    auxiliary_meanings: [\n      {\n        meaning: string;\n        type: string;\n      }\n    ];\n    characters: string;\n    component_subject_ids: number[];\n    created_at: string | null;\n    document_url: string;\n    hidden_at: string | null;\n    lesson_position: number;\n    level: number;\n    meaning_hint: string;\n    meaning_mnemonic: string;\n    meanings: [\n      {\n        meaning: string;\n        primary: boolean;\n        accepted_answer: boolean;\n      }\n    ];\n    reading_hint: string;\n    reading_mnemonic: string;\n    readings: [\n      {\n        reading: string;\n        primary: boolean;\n        accepted_answer: boolean;\n        type: string;\n      }\n    ];\n    slug: string;\n    visually_similar_subject_ids: number[];\n  };\n  data_updated_at: string;\n  id: number;\n  object: \"kanji\";\n  url: string;\n}\n\ninterface KanjiAssignmentData {\n  data: {\n    available_at: string | null;\n    burned_at: string | null;\n    created_at: string;\n    hidden: boolean;\n    passed_at: string | null;\n    resurrected_at: string | null;\n    srs_stage: number;\n    started_at: string;\n    subject_id: number;\n    subject_type: string;\n    unlocked_at: string | null;\n  };\n  data_updated_at: string;\n  id: number;\n  object: \"assignment\";\n  url: string;\n}\n\nexport interface Kanji {\n  id: number;\n  character: string;\n  url: string;\n  level: number;\n  meanings: string[];\n  similarIds: number[];\n}\n\ninterface QuestionState {\n  currentKanji: Kanji;\n  currentSimilarKanji: Kanji[];\n  answered: boolean;\n  correct: boolean | null;\n  validKanji: Kanji[] | number[]; // kanji[] if level mode, number[] if srs mode\n}\n\nconst initialState: QuestionState = {\n  currentKanji: {\n    id: 0,\n    character: \"\",\n    url: \"\",\n    level: 0,\n    meanings: [],\n    similarIds: [],\n  },\n  currentSimilarKanji: [],\n  answered: false,\n  correct: null,\n  validKanji: [],\n};\n\nconst questionSlice = createSlice({\n  name: \"question\",\n  initialState,\n  reducers: {\n    setCurrentKanji: (state, action) => {\n      // remove previous currentKanji from validKanji, if it exists\n      if (state.validKanji.length > 0) {\n        state.validKanji = (state.validKanji as (Kanji | number)[]).filter(\n          (kanji: Kanji | number) =>\n            typeof kanji === \"number\"\n              ? kanji !== state.currentKanji.id\n              : kanji.id !== state.currentKanji.id\n        ) as Kanji[];\n      } // maybe just use removeKanji action instead?\n\n      state.currentKanji = action.payload;\n    },\n    setSimilarKanji: (state, action) => {\n      state.currentSimilarKanji = action.payload;\n    },\n    setAnswered: (state, action) => {\n      state.answered = action.payload;\n    },\n    setCorrect: (state, action) => {\n      state.correct = action.payload;\n    },\n    setValidKanji: (state, action) => {\n      // if (current(state).validKanji.length === 0) {\n      state.validKanji = action.payload;\n      // } else {\n      //   state.validKanji = [...current(state).validKanji, action.payload];\n      // }\n    },\n    removeKanji: (state, action) => {\n      state.validKanji = (state.validKanji as (Kanji | number)[]).filter(\n        (kanji: Kanji | number) =>\n          typeof kanji === \"number\"\n            ? kanji !== action.payload\n            : kanji.id !== action.payload\n      ) as Kanji[];\n    },\n  },\n});\n\nexport const {\n  setCurrentKanji,\n  setSimilarKanji,\n  setAnswered,\n  setCorrect,\n  setValidKanji,\n  removeKanji,\n} = questionSlice.actions;\n\nexport const getSimilarKanji = (similarIds: number[]) => {\n  return async (dispatch: any, useState: any) => {\n    const apiKey = useState().user.apiKey;\n    let ids = [...similarIds]; // copy array\n\n    // if more than 3 similar kanji, pick 3 random ones\n    if (ids.length > 3) {\n      ids.sort(() => Math.random() - 0.5); // randomize array\n      ids = ids.slice(0, 3); // take first 3 elements\n    }\n\n    let kanjiOptions = [useState().question.currentKanji];\n\n    const getSimilarKanji = async (id: number, index: number) => {\n      await axios\n        .get(`https://api.wanikani.com/v2/subjects/${id}`, {\n          headers: {\n            Authorization: `Bearer ${apiKey}`,\n          },\n        })\n        .then((res) => {\n          // console.log(res.data, index);\n          const kanji = {\n            id: res.data.id,\n            character: res.data.data.characters,\n            url: res.data.data.document_url,\n            level: res.data.data.level,\n            meanings: res.data.data.meanings.map(\n              (meaning: { meaning: string }) => meaning.meaning\n            ),\n            similarIds: res.data.data.visually_similar_subject_ids,\n          };\n\n          kanjiOptions = [...kanjiOptions, kanji];\n        });\n    };\n\n    // get similar kanji for each id\n    for (let i = 0; i < ids.length; i++) {\n      await getSimilarKanji(ids[i], i);\n    }\n\n    // randomize kanjiOptions\n    kanjiOptions = kanjiOptions.sort(() => Math.random() - 0.5);\n\n    dispatch(setSimilarKanji(kanjiOptions));\n  };\n};\n\nexport const pickKanji = () => {\n  return async (dispatch: any, useState: any) => {\n    console.log(\"kanji being picked...\");\n    const validKanji = useState().question.validKanji;\n    const apiKey = useState().user.apiKey;\n\n    if (validKanji.length === 0) {\n      console.log(\"no kanji left\");\n      return;\n    } else {\n      console.log(\"valid kanji:\", validKanji);\n    }\n\n    if (typeof validKanji[0] === \"object\") {\n      console.log(\"level\");\n      dispatch(setCurrentKanji(validKanji[0]));\n      dispatch(getSimilarKanji(validKanji[0].similarIds));\n      dispatch(setValidKanji(validKanji.slice(1)));\n    } else if (typeof validKanji[0] === \"number\") {\n      console.log(\"srs\");\n\n      let currentIndex = 0;\n\n      const fetchKanji = async (index: number) => {\n        await axios\n          .get(`https://api.wanikani.com/v2/subjects/${validKanji[index]}`, {\n            headers: {\n              Authorization: `Bearer ${apiKey}`,\n            },\n          })\n          .then((res) => {\n            console.log(res.data);\n            if (res.data.data.visually_similar_subject_ids.length > 1) {\n              // console.log(\"valid\");\n              // update validKanji to remove all kanji previous to current kanji\n              dispatch(setValidKanji(validKanji.slice(index + 1)));\n\n              dispatch(\n                setCurrentKanji({\n                  id: res.data.id,\n                  character: res.data.data.characters,\n                  url: res.data.data.document_url,\n                  level: res.data.data.level,\n                  meanings: res.data.data.meanings.map(\n                    (meaning: { meaning: string }) => meaning.meaning\n                  ),\n                  similarIds: res.data.data.visually_similar_subject_ids,\n                })\n              );\n\n              dispatch(\n                getSimilarKanji(res.data.data.visually_similar_subject_ids)\n              );\n            } else {\n              // console.log(\"invalid\");\n              currentIndex += 1;\n              fetchKanji(currentIndex);\n            }\n          })\n          .catch((err) => {\n            console.log(err);\n            if (err.response.status === 429) {\n              console.log(err.response.data.error);\n            }\n          });\n      };\n\n      fetchKanji(currentIndex);\n      // console.log(validKanji);\n    }\n  };\n};\n\nexport const answerQuestion = (selectedKanji: Kanji) => {\n  return async (dispatch: any, useState: any) => {\n    const answer = useState().question.currentKanji;\n\n    dispatch(setAnswered(true));\n\n    if (selectedKanji.id === answer.id) {\n      dispatch(setCorrect(true));\n    } else {\n      dispatch(setCorrect(false));\n    }\n  };\n};\n\nexport const nextQuestion = () => {\n  return async (dispatch: any) => {\n    // console.log(\"next question 2\");\n    dispatch(setAnswered(false));\n    dispatch(setCorrect(null));\n    dispatch(pickKanji());\n  };\n};\n\nexport const initStudyByLevel = (selectedLevels: string) => {\n  return async (dispatch: any, useState: any) => {\n    const apiKey = useState().user.apiKey;\n\n    let validKanji: Kanji[] = [];\n\n    // recursively fetch all pages of kanji ids\n    const fetchIds = async (url: string | null) => {\n      if (url) {\n        await axios\n          .get(url, {\n            headers: {\n              Authorization: `Bearer ${apiKey}`,\n            },\n          })\n          .then((res) => {\n            console.log(\"fetched:\", res.data);\n\n            // dispatch(\n            //   setValidKanji(\n            //     res.data.data\n            //       .filter(\n            //         (kanji: KanjiSubjectData) =>\n            //           kanji.data.visually_similar_subject_ids.length > 1\n            //       )\n            //       .map((kanji: KanjiSubjectData) => {\n            //         return {\n            //           id: kanji.id,\n            //           character: kanji.data.characters,\n            //           url: kanji.url,\n            //           level: kanji.data.level,\n            //           meanings: kanji.data.meanings.map(\n            //             (meaning) => meaning.meaning\n            //           ),\n            //           similarIds: kanji.data.visually_similar_subject_ids,\n            //         };\n            //       })\n            //   )\n            // );\n\n            validKanji = validKanji.concat(\n              res.data.data\n                .filter(\n                  (kanji: KanjiSubjectData) =>\n                    kanji.data.visually_similar_subject_ids.length > 1\n                )\n                .map((kanji: KanjiSubjectData) => {\n                  return {\n                    id: kanji.id,\n                    character: kanji.data.characters,\n                    url: kanji.url,\n                    level: kanji.data.level,\n                    meanings: kanji.data.meanings.map(\n                      (meaning) => meaning.meaning\n                    ),\n                    similarIds: kanji.data.visually_similar_subject_ids,\n                  };\n                })\n            );\n\n            if (\n              res.data.total_count > res.data.pages.per_page &&\n              res.data.pages.next_url\n            ) {\n              console.log(\"fetching next page\");\n              fetchIds(res.data.pages.next_url);\n            }\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n      }\n    };\n\n    await fetchIds(\n      `https://api.wanikani.com/v2/subjects?types=kanji&started=true&levels=${selectedLevels}`\n    );\n\n    // randomize validKanji\n    validKanji = validKanji.sort(() => Math.random() - 0.5);\n    dispatch(setValidKanji(validKanji));\n\n    dispatch(pickKanji());\n  };\n};\n\nexport const initStudyBySrs = (selectedStage: string) => {\n  return async (dispatch: any, useState: any) => {\n    const apiKey = useState().user.apiKey;\n    let validKanji: number[] = [];\n    // recursively fetch all pages of kanji ids\n    const fetchIds = async (url: string | null) => {\n      if (url) {\n        await axios\n          .get(url, {\n            headers: {\n              Authorization: `Bearer ${apiKey}`,\n            },\n          })\n          .then((res) => {\n            console.log(\"fetched:\", res.data);\n\n            // dispatch(\n            //   setValidKanji(\n            //     res.data.data\n            //       .filter(\n            //         (kanji: KanjiAssignmentData) =>\n            //           kanji.data.subject_type === \"kanji\"\n            //       )\n            //       .map((kanji: KanjiAssignmentData) => kanji.data.subject_id)\n            //   )\n            // );\n\n            validKanji = [\n              ...validKanji,\n              ...res.data.data\n                .filter(\n                  (kanji: KanjiAssignmentData) =>\n                    kanji.data.subject_type === \"kanji\"\n                )\n                .map((kanji: KanjiAssignmentData) => kanji.data.subject_id),\n            ];\n\n            if (\n              res.data.total_count > res.data.pages.per_page &&\n              res.data.pages.next_url\n            ) {\n              console.log(\"fetching next page\");\n              fetchIds(res.data.pages.next_url);\n            }\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n      }\n    };\n    await fetchIds(\n      `https://api.wanikani.com/v2/assignments?srs_stages=${selectedStage}`\n    );\n\n    // randomize validKanji\n    validKanji = validKanji.sort(() => Math.random() - 0.5);\n    dispatch(setValidKanji(validKanji));\n\n    dispatch(pickKanji());\n  };\n};\n\nexport default questionSlice.reducer;\n// holds selected kanji, possible answers, answer, etc\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}